<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }"></ngx-loading>
<div class="container">
  <div class="d-flex">
    <ul class="nav justify-content-center">
      <li class="nav-item">
        <span class="font">Modulo de Productos en Venta</span>
      </li>
    </ul>
  </div>
  <!-- <div class="d-block p-2 bg-dark text-white fs-2 mb-1">Modulo de Usuarios</div> -->
  <div class="d-flex justify-content-start mb-3">
    <button class="button-86 fw-bold" (click)="openModal()">Registrar </button>
  </div>
  <app-modal [title]="isViewingDetails ? 'Detalles del producto en venta' : (isEditing ? 'Editar producto en venta' : 'Registrar producto en venta')"
   [isVisible]="isModalVisible" (close)="handleClose()"
    (confirmAction)="handleConfirm()"  [fields]="[
      { id: 'PROD_VENTA_NOMBRE', label: 'Nombre', type: 'text' },
      { id: 'PROD_VENTA_DESCRIPCION', label: 'DescripciÃ³n', type: 'text' },
      { id: 'PROD_VENTA_PRECIO', label: 'Precio', type: 'number' },
      { id: 'PROD_VENTA_IMAGEN', label: 'Imagen', type: 'file' }
    ]"
    [isEditing]="isEditing"
    [isViewingDetails]="isViewingDetails"
    [data]="editingprodventa">
  </app-modal>
</div>
<div *ngIf="!loading">
  <app-table [data]="prodventa" [columns]="[
    { key: 'PROD_VENTA_NOMBRE', label: 'Nombre' },
    { key: 'PROD_VENTA_IMAGEN', label: 'imagen' },
    { key: 'PROD_VENTA_PRECIO', label: 'Precio', format: 'currencyFormat' },
    ]" noDataMessage="No hay productos disponibles."
    [title]="title"
    (edit)="onEdit($event)"
    (delete)="onDelete($event)"
    (detail)="onDetail($event)">
  </app-table>
</div>
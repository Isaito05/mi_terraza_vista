<div class="container">
  <div class="card">
    <div class="card-body">
      <!-- <h5 class="card-title">{{title}}</h5> -->
      <table class="table table-hover">
        <!-- Encabezado de la tabla -->         
        <thead>
          <tr>
            <th *ngFor="let column of columns" scope="col">{{ column.label }}</th>
          </tr>
        </thead>

        <!-- Cuerpo de la tabla -->
        <tbody>
          <tr *ngFor="let item of data | paginate: { itemsPerPage: 5, currentPage: p }">
            <td *ngFor="let column of columns">
               <!-- Verifica si el tipo de columna es 'image' para mostrar una imagen -->
              <ng-container *ngIf="column.type === 'image'; else textContent">
                <img [src]="getPropertyValue(item, column.key)" alt="Imagen" width="100" height="100" />
              </ng-container>
              <!-- Si no es imagen, muestra el texto normalmente -->
              <ng-template #textContent>{{ getPropertyValue(item, column.key) }}</ng-template>
              <ng-template #defaultCell>
                <ng-container *ngIf="isArray(getPropertyValue(item, column.key)); else singleValue">
                  <span *ngFor="let subItem of getPropertyValue(item, column.key)">
                    Cantidad: {{ subItem.cantidad }}
                  </span>
                </ng-container>
                <ng-template #singleValue>
                  {{ getPropertyValue(item, column.key) }}
                </ng-template>
              </ng-template>
            </td>
             <!-- Columna para los botones de acción -->
             <td>
              <button class="btn btn-primary btn-sm me-2" (click)="onEdit(item)">
                <i class="bi bi-pencil-fill"></i> <!-- Icono de editar -->
              </button>
              <button class="btn btn-danger btn-sm me-2" >
                <i class="fas fa-trash"></i> <!-- Icono de eliminar -->
              </button>
              <button class="btn btn-info btn-sm">
                <i class="fas fa-info-circle"></i> <!-- Icono de detalles -->
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Mensaje de "No hay datos" -->
      <div *ngIf="data.length === 0" class="text-center mt-3">
        {{ noDataMessage }}
      </div>

      <!-- Controles de paginación -->
      <div class="d-flex justify-content-end me-4">
        <pagination-controls (pageChange)="p = $event" previousLabel="Anterior" nextLabel="Siguiente">
        </pagination-controls>
      </div>
    </div>
  </div>
  
</div>
